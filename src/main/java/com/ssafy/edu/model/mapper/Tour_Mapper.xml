<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gongsurae.awesomeplace.mapper.MemberMapper">
	
	<!-- 회원 아이디로 회원 조회 -->
	<select id="selectMemberById" resultType="com.gongsurae.awesomeplace.vo.MemberVO">
		SELECT * FROM MEMBER 
		WHERE MEM_ID = #{MEM_ID}
	</select>
	
	//전체 관광정보 반환(범위?)
	<select id="getTourInfoList" resultType="com.gongsurae.awesomeplace.vo.TourInfoVo">
		SELECT contentId,contentTypeId,mapx,mapy,overview,tel,address,title,zipcode,image,homepage FROM place
	</select>
	//현재위치, 반경에 따른 관광정보 반환+정렬
	<select id="getTourInfoByHere" resultType="com.gongsurae.awesomeplace.vo.TourInfoVo">
<![CDATA[SELECT title,
	(6371*acos(cos(radians(#{mapX}))*cos(radians(mapX))*cos(radians(mapY)
	-radians(126.8943311))+sin(radians(37.4685225))*sin(radians(P_LAT))))
	AS distance
FROM place
HAVING distance <= 0.3
ORDER BY distance 
LIMIT 0,300]]>
	</select>
	<!-- //현재위치, 반경에 따른 관광정보 반환(이용가능)+정렬
	List<TourInfoVo> getAvailableTourInfoByHere(int mapx,int mapy,int distance);
	//현재위치, 반경에 따른 관광정보 반환(이용 불가능)+정렬
	List<TourInfoVo> getUnAvailableTourInfoByHere(int mapx,int mapy,int distance); -->
	//지역에 따른 관광정보 반환
	<select id="getTourInfoByLocation" resultType="TourInfoVo">
		<if test="sigunguCode==null">
			SELECT contentId,contentTypeId,mapx,mapy,overview,tel,address,title,zipcode,image,homepage FROM place WHERE areacode=#{areaCode}
		</if>
		<if test="sigunguCode!=null">
			SELECT contentId,contentTypeId,mapx,mapy,overview,tel,address,title,zipcode,image,homepage FROM place WHERE areacode=#{areaCode} and sigunguCode=#{sigunguCode}
		</if>
	</select>
	//Id로? 상세정보 반환
	<select id="getDetailByCId" resultType="DetailVo">
		
	</select>
	DetailVo getDetailByCId(int contentId);
	//관광정보 입력
	<insert id="insertTourInfo" parameterType="TourInfoVo"></insert>
	boolean insertTourInfo(TourInfoVo ti);
	//관광정보 수정
	boolean updateTourInfo(TourInfoVo ti);
	//관광정보 삭제
	boolean deleteTourInfo(int contentId);
	//상세정보 입력
	boolean insertDetail(DetailVo dt);
	//상세정보 수정
	boolean updateDetail(DetailVo dt);
	//상세정보 삭제
	boolean deleteDetail(int contentId);
	//지역 정보 반환
	List<AreaVo> getArea();//시,도
	List<SigunguVo> getSigungu(int areaCode);//시,군,구
	//컨텐츠 타입 반환
	List<ContentTypeVo> getContentType();


</mapper>